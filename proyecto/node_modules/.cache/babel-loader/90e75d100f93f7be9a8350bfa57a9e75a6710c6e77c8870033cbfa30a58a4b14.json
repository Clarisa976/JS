{"ast":null,"code":"import React,{useState}from'react';import{Button,Form,FormGroup,Label,Input,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import axios from'axios';import md5 from'md5';//import { USUARIOS } from \"../data/users.js\"; \nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=props=>{const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');// const URL_API = 'http://localhost/Proyectos/JS/REACT/prueba-docker/build/API/login.php';//casa\nconst URL_API='http://localhost/Proyectos/DWECL/DWECL/proyecto/build/API/login.php';const handleChange=e=>{if(e.target.name==='username'){setUsername(e.target.value);}else if(e.target.name==='password'){setPassword(e.target.value);}};const handleSubmit=async e=>{e.preventDefault();if(username.trim()===''||password.trim()===''){setError(\"Please fill out all fields.\");return;}try{// Preparamos los datos en formato JSON y encriptamos el password con MD5\nconst response=await axios.post(URL_API,JSON.stringify({usuario:username,password:md5(password)}),{headers:{'Content-Type':'application/json'}});const data=response.data;// Verificamos el mensaje que nos devuelve el PHP\nif(data.mensaje===\"Acceso correcto\"){console.log(\"User logged in:\",data.usuario);props.onLogin(data.usuario);props.toggle();setError('');setUsername('');setPassword('');}else{setError(data.mensaje);}}catch(err){console.error(\"Error during login:\",err);setError(\"An error occurred. Please try again.\");}};return/*#__PURE__*/_jsxs(Modal,{isOpen:props.show,toggle:props.toggle,size:\"xl\",modalClassName:\"modal-custom-size\",children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:props.toggle,children:\"Login\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"username\",id:\"username\",placeholder:\"Enter your username\",value:username,onChange:handleChange})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",id:\"password\",placeholder:\"Enter your password\",value:password,onChange:handleChange})]}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error})]}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",color:\"primary\",children:\"Login\"}),' ',/*#__PURE__*/_jsx(Button,{type:\"button\",color:\"secondary\",onClick:props.toggle,children:\"Cancel\"})]})]})]});};export default Login;","map":{"version":3,"names":["React","useState","Button","Form","FormGroup","Label","Input","Modal","ModalHeader","ModalBody","ModalFooter","axios","md5","jsx","_jsx","jsxs","_jsxs","Login","props","username","setUsername","password","setPassword","error","setError","URL_API","handleChange","e","target","name","value","handleSubmit","preventDefault","trim","response","post","JSON","stringify","usuario","headers","data","mensaje","console","log","onLogin","toggle","err","isOpen","show","size","modalClassName","children","onSubmit","for","type","id","placeholder","onChange","style","color","onClick"],"sources":["/opt/lampp/htdocs/Proyectos/DWECL/DWECL/proyecto/src/components/LoginComponent.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport axios from 'axios';\nimport md5 from 'md5';\n//import { USUARIOS } from \"../data/users.js\"; \n\nconst Login = (props) => {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n   // const URL_API = 'http://localhost/Proyectos/JS/REACT/prueba-docker/build/API/login.php';//casa\n    const URL_API = 'http://localhost/Proyectos/DWECL/DWECL/proyecto/build/API/login.php';\n\n    const handleChange = (e) => {\n        if (e.target.name === 'username') {\n            setUsername(e.target.value);\n        } else if (e.target.name === 'password') {\n            setPassword(e.target.value);\n        }\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (username.trim() === '' || password.trim() === '') {\n            setError(\"Please fill out all fields.\");\n            return;\n        }\n\n        try {\n           // Preparamos los datos en formato JSON y encriptamos el password con MD5\n           const response = await axios.post(URL_API, JSON.stringify({\n                usuario: username,\n                password: md5(password)\n            }),\n            {\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            }\n        );\n\n        const data = response.data;\n        // Verificamos el mensaje que nos devuelve el PHP\n        if (data.mensaje === \"Acceso correcto\") {\n            console.log(\"User logged in:\", data.usuario);\n            props.onLogin(data.usuario);\n            props.toggle();\n            setError('');\n            setUsername('');\n            setPassword('');\n          } else {\n            setError(data.mensaje);\n          }\n          \n    } catch (err) {\n        console.error(\"Error during login:\", err);\n        setError(\"An error occurred. Please try again.\");\n    }\n};\n\n  return (\n    <Modal isOpen={props.show} toggle={props.toggle} size=\"xl\" modalClassName=\"modal-custom-size\">\n      <ModalHeader toggle={props.toggle}>Login</ModalHeader>\n      <Form onSubmit={handleSubmit}>\n        <ModalBody>\n          <FormGroup>\n            <Label for=\"username\">Username:</Label>\n            <Input\n              type=\"text\"\n              name=\"username\"\n              id=\"username\"\n              placeholder=\"Enter your username\"\n              value={username}\n              onChange={handleChange}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Label for=\"password\">Password:</Label>\n            <Input\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              placeholder=\"Enter your password\"\n              value={password}\n              onChange={handleChange}\n            />\n          </FormGroup>\n          {error && <p style={{ color: 'red' }}>{error}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button type=\"submit\" color=\"primary\">Login</Button>{' '}\n          <Button type=\"button\" color=\"secondary\" onClick={props.toggle}>Cancel</Button>\n        </ModalFooter>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}